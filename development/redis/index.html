<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Redis | My New Site</title><meta name=keywords content><meta name=description content="Getting started Redis is a distributed in-memory data structure store used as cache, database, and message broker.
Installation To install redis follow the official instructions
Redis server and redis-cli tool will be installed
Making sure redis-cli is installed Open up your shell (terminal, console, wsl whatever). Typing in redis-cli --version should show installed version of redis. $ redis-cli --version redis-cli 6.2.6 Connecting to redis instance Specify -h parameter to connect with needed host."><meta name=author content><link rel=canonical href=https://msoovali.github.io/development/redis/><link crossorigin=anonymous href=/assets/css/stylesheet.min.ec8da366ca2fb647537ccb7a8f6fa5b4e9cd3c7a0d3171dd2d3baad1e49c8bfc.css integrity="sha256-7I2jZsovtkdTfMt6j2+ltOnNPHoNMXHdLTuq0eSci/w=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://msoovali.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://msoovali.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://msoovali.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://msoovali.github.io/apple-touch-icon.png><link rel=mask-icon href=https://msoovali.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Redis"><meta property="og:description" content="Getting started Redis is a distributed in-memory data structure store used as cache, database, and message broker.
Installation To install redis follow the official instructions
Redis server and redis-cli tool will be installed
Making sure redis-cli is installed Open up your shell (terminal, console, wsl whatever). Typing in redis-cli --version should show installed version of redis. $ redis-cli --version redis-cli 6.2.6 Connecting to redis instance Specify -h parameter to connect with needed host."><meta property="og:type" content="article"><meta property="og:url" content="https://msoovali.github.io/development/redis/"><meta property="article:section" content="development"><meta property="article:published_time" content="2022-03-26T09:33:13+03:00"><meta property="article:modified_time" content="2022-03-26T09:33:13+03:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Redis"><meta name=twitter:description content="Getting started Redis is a distributed in-memory data structure store used as cache, database, and message broker.
Installation To install redis follow the official instructions
Redis server and redis-cli tool will be installed
Making sure redis-cli is installed Open up your shell (terminal, console, wsl whatever). Typing in redis-cli --version should show installed version of redis. $ redis-cli --version redis-cli 6.2.6 Connecting to redis instance Specify -h parameter to connect with needed host."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Developments","item":"https://msoovali.github.io/development/"},{"@type":"ListItem","position":2,"name":"Redis","item":"https://msoovali.github.io/development/redis/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Redis","name":"Redis","description":"Getting started Redis is a distributed in-memory data structure store used as cache, database, and message broker.\nInstallation To install redis follow the official instructions\nRedis server and redis-cli tool will be installed\nMaking sure redis-cli is installed Open up your shell (terminal, console, wsl whatever). Typing in redis-cli --version should show installed version of redis. $ redis-cli --version redis-cli 6.2.6 Connecting to redis instance Specify -h parameter to connect with needed host.","keywords":[],"articleBody":"Getting started Redis is a distributed in-memory data structure store used as cache, database, and message broker.\nInstallation To install redis follow the official instructions\nRedis server and redis-cli tool will be installed\nMaking sure redis-cli is installed Open up your shell (terminal, console, wsl whatever). Typing in redis-cli --version should show installed version of redis. $ redis-cli --version redis-cli 6.2.6 Connecting to redis instance Specify -h parameter to connect with needed host.\n$ redis-cli -h redis.example.com redis.example.com:6379\u003e If host parameter is omitted then redis will connect to localhost.\n$ redis-cli 127.0.0.1:6379\u003e Getting info about redis server redis.example.com:6379\u003e info # Server redis_version:6.2.6 ... Switching databases Redis has 16 databases which are numbered from 0 to 15.\nTo switch database in redis shell:\n127.0.0.1:6379\u003e select 5 OK 127.0.0.1:6379[5]\u003e To specify database when connecting to instance:\n$ redis-cli -n 5 127.0.0.1:6379[5]\u003e Keys, values and time to live (ttl) To get all keys in current database:\n127.0.0.1:6379\u003e keys * If we know that key should consist something, then we could try searching with pattern matcher:\n127.0.0.1:6379\u003e keys *duck* 1) \"cache:ducks:europe\" ... If we know that it starts or ends with specific string then beginning or ending asterisk can be omitted.\nTo view key value we can use get key:name\n127.0.0.1:6379\u003e get cache:ducks:europe \"[{\\\"name\\\":\\\"Donald\\\"}]\" We were lucky that the key value was saved in a readable format. But sometimes values are encoded and might not be human-readable at all.\nSome keys are self-expiring. After set time they will be deleted automatically. To view keys time to live (TTL) we could use ttl command:\n127.0.0.1:6379\u003e ttl cache:ducks:europe (integer) 3503 Received value is in seconds. To get remaining minutes out of it, we could divide the number by 60. To get hours then we need to divide by 3600.\nSome keys are non-expiring and their ttl is returned as -1.\nDeleting keys To delete a key we could use del command:\n127.0.0.1:6379\u003e del cache:ducks:europe (integer) 1 We can also specify multiple keys:\n127.0.0.1:6379\u003e del cache:ducks:europe cache:ducks:australia cache:ducks:america (integer) 2 Notice that it returns number of keys deleted (that existed and were deleted).\nDeleting multiple keys with key patterns Sometimes it is annoying to specify all the keys one by one that need to be deleted. And redis does not support key patterns when using del command.\nLuckily we could use some bash functionality to get it done (make sure that You are not executing it from redis shell this time):\n$ redis-cli keys cache:ducks:* | xargs redis-cli del This will also return number of keys deleted.\nIn production instead of using keys make sure You use scan as scan is a non-blocking compared to keys.\n$ redis-cli --scan --pattern cache:ducks:* | xargs redis-cli del Publishers and subscribers - streams Listing all available channels:\n127.0.0.1:6379\u003e PUBSUB CHANNELS 1) \"stream:ducks:europe\" ... Subscribing to channel:\n127.0.0.1:6379\u003e subscribe stream:ducks:europe Reading messages... (press Ctrl-C to quit) 1) \"subscribe\" 2) \"stream:ducks:europe\" 3) (integer) 1 1) \"message\" 2) \"stream:ducks:europe\" 3) \"[{\\\"name\\\":\\\"Donald\\\"}]\" ","wordCount":"488","inLanguage":"en","datePublished":"2022-03-26T09:33:13+03:00","dateModified":"2022-03-26T09:33:13+03:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://msoovali.github.io/development/redis/"},"publisher":{"@type":"Organization","name":"My New Site","logo":{"@type":"ImageObject","url":"https://msoovali.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://msoovali.github.io/ accesskey=h title="My New Site (Alt + H)">My New Site</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Redis</h1><div class=post-meta><span title='2022-03-26 09:33:13 +0300 +0300'>March 26, 2022</span></div></header><div class=post-content><h1 id=getting-started>Getting started<a hidden class=anchor aria-hidden=true href=#getting-started>#</a></h1><p>Redis is a distributed in-memory data structure store used as cache, database, and message broker.</p><h2 id=installation>Installation<a hidden class=anchor aria-hidden=true href=#installation>#</a></h2><p>To install redis follow the <a href=https://redis.io/docs/getting-started/>official instructions</a><br>Redis server and redis-cli tool will be installed</p><h2 id=making-sure-redis-cli-is-installed>Making sure redis-cli is installed<a hidden class=anchor aria-hidden=true href=#making-sure-redis-cli-is-installed>#</a></h2><ol><li>Open up your shell (terminal, console, wsl whatever).</li><li>Typing in <code>redis-cli --version</code> should show installed version of redis.</li></ol><pre tabindex=0><code>$ redis-cli --version
redis-cli 6.2.6
</code></pre><h2 id=connecting-to-redis-instance>Connecting to redis instance<a hidden class=anchor aria-hidden=true href=#connecting-to-redis-instance>#</a></h2><p>Specify <code>-h</code> parameter to connect with needed host.</p><pre tabindex=0><code>$ redis-cli -h redis.example.com
redis.example.com:6379&gt;
</code></pre><p>If host parameter is omitted then redis will connect to localhost.</p><pre tabindex=0><code>$ redis-cli
127.0.0.1:6379&gt;
</code></pre><h2 id=getting-info-about-redis-server>Getting info about redis server<a hidden class=anchor aria-hidden=true href=#getting-info-about-redis-server>#</a></h2><pre tabindex=0><code>redis.example.com:6379&gt; info
# Server
redis_version:6.2.6
...
</code></pre><h1 id=switching-databases>Switching databases<a hidden class=anchor aria-hidden=true href=#switching-databases>#</a></h1><p>Redis has 16 databases which are numbered from 0 to 15.</p><p>To switch database in redis shell:</p><pre tabindex=0><code>127.0.0.1:6379&gt; select 5
OK
127.0.0.1:6379[5]&gt;
</code></pre><p>To specify database when connecting to instance:</p><pre tabindex=0><code>$ redis-cli -n 5
127.0.0.1:6379[5]&gt;
</code></pre><h1 id=keys-values-and-time-to-live-ttl>Keys, values and time to live (ttl)<a hidden class=anchor aria-hidden=true href=#keys-values-and-time-to-live-ttl>#</a></h1><p>To get all keys in current database:</p><pre tabindex=0><code>127.0.0.1:6379&gt; keys *
</code></pre><p>If we know that key should consist something, then we could try searching with pattern matcher:</p><pre tabindex=0><code>127.0.0.1:6379&gt; keys *duck*
1) &#34;cache:ducks:europe&#34;
...
</code></pre><p>If we know that it starts or ends with specific string then beginning or ending asterisk can be omitted.</p><p>To view key value we can use <code>get key:name</code></p><pre tabindex=0><code>127.0.0.1:6379&gt; get cache:ducks:europe
&#34;[{\&#34;name\&#34;:\&#34;Donald\&#34;}]&#34;
</code></pre><p>We were lucky that the key value was saved in a readable format. But sometimes values are encoded and might not be human-readable at all.</p><p>Some keys are self-expiring. After set time they will be deleted automatically. To view keys time to live (TTL) we could use <code>ttl</code> command:</p><pre tabindex=0><code>127.0.0.1:6379&gt; ttl cache:ducks:europe
(integer) 3503
</code></pre><p>Received value is in seconds. To get remaining minutes out of it, we could divide the number by 60. To get hours then we need to divide by 3600.<br>Some keys are non-expiring and their ttl is returned as -1.</p><h1 id=deleting-keys>Deleting keys<a hidden class=anchor aria-hidden=true href=#deleting-keys>#</a></h1><p>To delete a key we could use <code>del</code> command:</p><pre tabindex=0><code>127.0.0.1:6379&gt; del cache:ducks:europe
(integer) 1
</code></pre><p>We can also specify multiple keys:</p><pre tabindex=0><code>127.0.0.1:6379&gt; del cache:ducks:europe cache:ducks:australia cache:ducks:america
(integer) 2
</code></pre><p>Notice that it returns number of keys deleted (that existed and were deleted).</p><h2 id=deleting-multiple-keys-with-key-patterns>Deleting multiple keys with key patterns<a hidden class=anchor aria-hidden=true href=#deleting-multiple-keys-with-key-patterns>#</a></h2><p>Sometimes it is annoying to specify all the keys one by one that need to be deleted. And redis does not support key patterns when using <code>del</code> command.<br>Luckily we could use some bash functionality to get it done (make sure that You are not executing it from redis shell this time):</p><pre tabindex=0><code>$ redis-cli keys cache:ducks:* | xargs redis-cli del
</code></pre><p>This will also return number of keys deleted.</p><p>In production instead of using keys make sure You use scan as scan is a non-blocking compared to keys.</p><pre tabindex=0><code>$ redis-cli --scan --pattern cache:ducks:* | xargs redis-cli del
</code></pre><h1 id=publishers-and-subscribers---streams>Publishers and subscribers - streams<a hidden class=anchor aria-hidden=true href=#publishers-and-subscribers---streams>#</a></h1><p>Listing all available channels:</p><pre tabindex=0><code>127.0.0.1:6379&gt; PUBSUB CHANNELS
 1) &#34;stream:ducks:europe&#34;
...
</code></pre><p>Subscribing to channel:</p><pre tabindex=0><code>127.0.0.1:6379&gt; subscribe stream:ducks:europe
Reading messages... (press Ctrl-C to quit)
1) &#34;subscribe&#34;
2) &#34;stream:ducks:europe&#34;
3) (integer) 1
1) &#34;message&#34;
2) &#34;stream:ducks:europe&#34;
3) &#34;[{\&#34;name\&#34;:\&#34;Donald\&#34;}]&#34;
</code></pre></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://msoovali.github.io/>My New Site</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>